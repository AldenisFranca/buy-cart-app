{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useState, useContext } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar MyContext = createContext();\nvar MyProvider = function MyProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    cart = _useState2[0],\n    setCart = _useState2[1];\n  var addToCart = function addToCart(product) {\n    var existingProductIndex = cart.findIndex(function (item) {\n      return item.id === product.id;\n    });\n    if (existingProductIndex !== -1) {\n      var updatedCart = _toConsumableArray(cart);\n      updatedCart[existingProductIndex].quantity += 1;\n      setCart(updatedCart);\n    } else {\n      setCart([].concat(_toConsumableArray(cart), [_objectSpread({}, product)]));\n    }\n  };\n  var delToCart = function delToCart(product) {\n    var existingProductIndex = cart.findIndex(function (item) {\n      return item.id === product.id;\n    });\n    if (existingProductIndex !== -1) {\n      var updatedCart = _toConsumableArray(cart);\n      if (updatedCart[existingProductIndex].quantity > 0) {\n        updatedCart[existingProductIndex].quantity -= 1;\n        if (updatedCart[existingProductIndex].quantity == 0) {\n          removeFromCart(product.id);\n        } else {\n          setCart(updatedCart);\n        }\n      }\n    } else {\n      setCart([].concat(_toConsumableArray(cart), [_objectSpread(_objectSpread({}, product), {}, {\n        quantity: 0\n      })]));\n    }\n  };\n  var removeFromCart = function removeFromCart(productId) {\n    var updatedCart = cart.map(function (item) {\n      return item.id === productId && item.quantity > 1 ? _objectSpread(_objectSpread({}, item), {}, {\n        quantity: item.quantity - 1\n      }) : item;\n    }).filter(function (item) {\n      return item.id !== productId;\n    });\n    setCart(updatedCart);\n  };\n  return _jsx(MyContext.Provider, {\n    value: {\n      cart: cart,\n      addToCart: addToCart,\n      delToCart: delToCart,\n      removeFromCart: removeFromCart\n    },\n    children: children\n  });\n};\nvar useMyContext = function useMyContext() {\n  var context = useContext(MyContext);\n  if (!context) {\n    throw new Error('useMyContext must be used within a MyProvider');\n  }\n  return context;\n};\nexport { MyProvider, useMyContext };","map":{"version":3,"names":["React","createContext","useState","useContext","jsx","_jsx","MyContext","MyProvider","_ref","children","_useState","_useState2","_slicedToArray","cart","setCart","addToCart","product","existingProductIndex","findIndex","item","id","updatedCart","_toConsumableArray","quantity","concat","_objectSpread","delToCart","removeFromCart","productId","map","filter","Provider","value","useMyContext","context","Error"],"sources":["/home/aeag/Documentos/ifpe/cart/src/context/MyContext.js"],"sourcesContent":["import React, { createContext, useState, useContext } from 'react';\n\nconst MyContext = createContext();\n\nconst MyProvider = ({ children }) => {\n  const [cart, setCart] = useState([]);\n\n  const addToCart = (product) => {\n    const existingProductIndex = cart.findIndex((item) => item.id === product.id);\n\n    if (existingProductIndex !== -1) {\n      // Se o produto já está no carrinho, aumenta a quantidade\n      const updatedCart = [...cart];\n      updatedCart[existingProductIndex].quantity += 1;\n      setCart(updatedCart);\n    } else {\n      // Se o produto não está no carrinho, adiciona com quantidade 1\n      // setCart([...cart, { ...product, quantity: 1 }]);\n      setCart([...cart, { ...product }]);\n    }\n  };\n\n  const delToCart = (product) => {\n    const existingProductIndex = cart.findIndex((item) => item.id === product.id);\n\n    if (existingProductIndex !== -1) {\n      // Se o produto já está no carrinho, aumenta a quantidade\n      const updatedCart = [...cart];\n      if (updatedCart[existingProductIndex].quantity > 0) {\n        updatedCart[existingProductIndex].quantity -= 1;\n        if (updatedCart[existingProductIndex].quantity == 0) {\n          removeFromCart(product.id)\n        } else {\n          setCart(updatedCart);\n        }\n\n      }\n\n    } else {\n      // Se o produto não está no carrinho, adiciona com quantidade 1\n      setCart([...cart, { ...product, quantity: 0 }]);\n    }\n\n\n  };\n\n  const removeFromCart = (productId) => {\n    const updatedCart = cart.map((item) =>\n      item.id === productId && item.quantity > 1\n        ? { ...item, quantity: item.quantity - 1 }\n        : item\n    ).filter((item) => item.id !== productId);\n\n    setCart(updatedCart);\n  };\n\n  return (\n    <MyContext.Provider value={{ cart, addToCart, delToCart, removeFromCart }}>\n      {children}\n    </MyContext.Provider>\n  );\n};\n\nconst useMyContext = () => {\n  const context = useContext(MyContext);\n  if (!context) {\n    throw new Error('useMyContext must be used within a MyProvider');\n  }\n  return context;\n};\n\nexport { MyProvider, useMyContext };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}